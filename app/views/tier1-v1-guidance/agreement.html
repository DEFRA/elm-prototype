{% extends "layout.html" %}

{% block pageTitle %}
Check your answers
{% endblock %}

{% block beforeContent %}
<a class="govuk-back-link" href="/tier1-v1-guidance/calculation">Back</a>
{% endblock %}

<!--calulations-->
{% set manureTotal = data['manure']['multiplier'] * data['manure']['amount'] %}
{% set bogTotal = data['bog-grazing']['multiplier'] * data['bog-grazing']['amount'] %}
{% set grasslandTotal = data['create-grassland']['multiplier'] * data['create-grassland']['amount'] %}
{% set grassTotal = data['grass-strips']['multiplier'] * data['grass-strips']['amount'] %}
{% set treeTotal = data['tree-belts']['multiplier'] * data['tree-belts']['amount'] %}
{% set canopyTotal = data['canopy-cover']['multiplier'] * data['canopy-cover']['amount'] %}
{% set fencingTotal = data['fencing']['multiplier'] * data['fencing']['amount'] %}
{% set windTotal = data['wind-erosion']['multiplier'] * data['wind-erosion']['amount'] %}
{% set deadwoodTotal = data['deadwood']['multiplier'] * data['deadwood']['amount'] %}
{% set soilTotal = data['bare-soil']['multiplier'] * data['bare-soil']['amount'] %}
{% set flowerTotal = data['flower-habitat']['multiplier'] * data['flower-habitat']['amount'] %}
{% set waterTotal = data['drinking-water']['multiplier'] * data['drinking-water']['amount'] %}
{% set nutrientsTotal = data['nutrients']['multiplier'] * data['nutrients']['amount'] %}
{% set agroforestryTotal = data['agroforestry']['multiplier'] * data['agroforestry']['amount'] %}
{% set coverTotal = data['cover-crops']['multiplier'] * data['cover-crops']['amount'] %}
{% set spreadingTotal = data['fertiliser-spreading']['multiplier'] * data['fertiliser-spreading']['amount'] %}
{% set fertilisersTotal = data['fertilisers']['multiplier'] * data['fertilisers']['amount'] %}
{% set tillTotal = data['no-till']['multiplier'] * data['no-till']['amount'] %}

{% set fullTotal = manureTotal + bogTotal + grasslandTotal + grassTotal + treeTotal + canopyTotal + fencingTotal + windTotal + deadwoodTotal + soilTotal + flowerTotal + waterTotal + nutrientsTotal + agroforestryTotal + coverTotal + spreadingTotal + fertilisersTotal + tillTotal %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <h1 class="govuk-heading-xl">Your agreement</h1>

    <div class="govuk-inset-text govuk-!-margin-bottom-9">
      <h2 class="govuk-heading-m govuk-!-margin-bottom-4">Checks completed successfully</h2>
      Your chosen action(s) are appropriate for the land registration information we have on record for your business.
    </div>

    <h2 class="govuk-heading-l">Your plan</h2>

    <dl class="govuk-summary-list govuk-!-margin-bottom-9">

      {% if data['manure']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['manure']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['manure']['amount'] | commafy }} {{ data['manure']['unit'] }} at {{ data['manure']['rate'] }}<br><br>Total payment: £{{ manureTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['bog-grazing']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['bog-grazing']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['bog-grazing']['amount'] | commafy }} {{ data['bog-grazing']['unit'] }} at {{ data['bog-grazing']['rate'] }}<br><br>Total payment: £{{ bogTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['create-grassland']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['create-grassland']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['create-grassland']['amount'] | commafy }} {{ data['create-grassland']['unit'] }} at {{ data['create-grassland']['rate'] }}<br><br>Total payment: £{{ grasslandTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['grass-strips']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['grass-strips']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['grass-strips']['amount'] | commafy }} {{ data['grass-strips']['unit'] }} at {{ data['grass-strips']['rate'] }}<br><br>Total payment: £{{ grassTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['tree-belts']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['tree-belts']['description'] }}<br><br>(requires a site visit)</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['tree-belts']['amount'] | commafy }} {{ data['tree-belts']['unit'] }} at {{ data['tree-belts']['rate'] }}<br><br>Total payment: £{{ treeTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['canopy-cover']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['canopy-cover']['description'] }}<br><br>(requires a site visit)</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['canopy-cover']['amount'] | commafy }} {{ data['canopy-cover']['unit'] }} at {{ data['canopy-cover']['rate'] }}<br><br>Total payment: £{{ canopyTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['fencing']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['fencing']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['fencing']['amount'] | commafy }} {{ data['fencing']['unit'] }} at {{ data['fencing']['rate'] }}<br><br>Total payment: £{{ fencingTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['wind-erosion']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['wind-erosion']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['wind-erosion']['amount'] | commafy }} {{ data['wind-erosion']['unit'] }} at {{ data['wind-erosion']['rate'] }}<br><br>Total payment: £{{ windTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['deadwood']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['deadwood']['description'] }}<br><br>(requires a site visit)</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['deadwood']['amount'] | commafy }} {{ data['deadwood']['unit'] }} at {{ data['deadwood']['rate'] }}<br><br>Total payment: £{{ deadwoodTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['bare-soil']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['bare-soil']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['bare-soil']['amount'] | commafy }} {{ data['bare-soil']['unit'] }} at {{ data['bare-soil']['rate'] }}<br><br>Total payment: £{{ soilTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['flower-habitat']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['flower-habitat']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['flower-habitat']['amount'] | commafy }} {{ data['flower-habitat']['unit'] }} at {{ data['flower-habitat']['rate'] }}<br><br>Total payment: £{{ flowerTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['drinking-water']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['drinking-water']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['drinking-water']['amount'] | commafy }} {{ data['drinking-water']['unit'] }} at {{ data['drinking-water']['rate'] }}<br><br>Total payment: £{{ waterTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['nutrients']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['nutrients']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['nutrients']['amount'] | commafy }} {{ data['nutrients']['unit'] }} at {{ data['nutrients']['rate'] }}<br><br>Total payment: £{{ nutrientsTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['agroforestry']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['agroforestry']['description'] }}<br><br>(requires a site visit)</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['agroforestry']['amount'] | commafy }} {{ data['agroforestry']['unit'] }} at {{ data['agroforestry']['rate'] }}<br><br>Total payment: £{{ agroforestryTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['cover-crops']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['cover-crops']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['cover-crops']['amount'] | commafy }} {{ data['cover-crops']['unit'] }} at {{ data['cover-crops']['rate'] }}<br><br>Total payment: £{{ coverTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['fertiliser-spreading']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['fertiliser-spreading']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['fertiliser-spreading']['amount'] | commafy }} {{ data['fertiliser-spreading']['unit'] }} at {{ data['fertiliser-spreading']['rate'] }}<br><br>Total payment: £{{ spreadingTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['fertilisers']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['fertilisers']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['fertilisers']['amount'] | commafy }} {{ data['fertilisers']['unit'] }} at {{ data['fertilisers']['rate'] }}<br><br>Total payment: £{{ fertilisersTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      {% if data['no-till']['amount'] != 0 %}
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">{{ data['no-till']['description'] }}</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half">{{ data['no-till']['amount'] | commafy }} {{ data['no-till']['unit'] }} at {{ data['no-till']['rate'] }}<br><br>Total payment: £{{ tillTotal | commafy }}</dd>
      </div>
      {% else %}{% endif %}

      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key govuk-!-width-one-half">Total payment</dt>
        <dd class="govuk-summary-list__value govuk-!-width-one-half"><strong>£{{ fullTotal | commafy }}</strong></dd>
        <dd class="govuk-summary-list__actions govuk-!-width-one-half"></dd>
      </div>

    </dl>

    <h2 class="govuk-heading-l">Consent to your agreement</h2>

    <p>The actions you've selected require you to provide evidence to support your claim.</p>
      <p>By consenting you agree that:</p>
      <ul class="govuk-list govuk-list--bullet">
        <li>the information you've provided us with is correct</li>
        <li>if asked, you will provide evidence to support your chosen actions</li>
        {% if data['canopy-cover']['amount'] != 0 or data['deadwood']['amount'] or data['agroforestry']['amount'] != 0 or data['tree-belts']['amount'] %}
        <li>you will arrange a site visit</li>
        {% endif %}
      </ul>

      <form action="/application-complete" method="post" novalidate>

        <input type="hidden" name="answers-checked" value="true">

        <div class="govuk-form-group govuk-!-margin-bottom-9">
          <div class="govuk-checkboxes">
            <div class="govuk-checkboxes__item">
              <input class="govuk-checkboxes__input" id="agreement-consent" name="agreement-consent" type="checkbox" value="consent-given">
              <label class="govuk-label govuk-checkboxes__label" for="agreement-consent">
                {% if data['canopy-cover']['amount'] != 0 or data['deadwood']['amount'] or data['agroforestry']['amount'] != 0 or data['tree-belts']['amount'] %}
                I consent <span class="govuk-visually-hidden"> that the information I've provided is correct, that if asked, I will provide evidence to support my chosen actions and that I will arrange a site visit.</span>
                {% else %}
                I consent <span class="govuk-visually-hidden"> that the information I've provided is correct and that if asked I will provide evidence to support my chosen actions.</span>
                {% endif %}
              </label>
            </div>
          </div>
        </div>

        {{ govukButton({
          text: "Submit your agreement",
          preventDoubleClick: true
        }) }}

      </form>

  </div>
</div>
{% endblock %}
